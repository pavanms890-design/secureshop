{% extends 'base.html' %}
{% block title %}SecureShop ‚Äî Shop Securely{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
{% endblock %}

{% block content %}

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     HERO SLIDER SECTION
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section class="hero-section">
    <div class="hero-slider" id="heroSlider">
        {% for product in slider_products %}
        <div class="hero-slide {% if loop.first %}active{% endif %}">
            <div class="hero-content">
                <div class="hero-text">
                    <span class="hero-badge">üî• Trending Now</span>
                    <h1>{{ product.name }}</h1>
                    <p>{{ product.description[:100] }}...</p>
                    <div class="hero-price">
                        <span class="current-price">‚Çπ{{ "%.0f"|format(product.price) }}</span>
                        {% if product.original_price %}
                        <span class="original-price">‚Çπ{{ "%.0f"|format(product.original_price) }}</span>
                        <span class="discount-badge">
                            {{ ((1 - product.price/product.original_price)*100)|int }}% OFF
                        </span>
                        {% endif %}
                    </div>
                    <div class="hero-actions">
                        <a href="{{ url_for('products') }}" class="btn-primary">Shop Now</a>
                        <button class="btn-secondary"
                            onclick="addToCart({{ product.id }})">
                            <i class="fas fa-cart-plus"></i> Add to Cart
                        </button>
                    </div>
                </div>
                <div class="hero-image">
                    <div class="image-frame">
                        <img src="{{ product.image_url }}" alt="{{ product.name }}" loading="lazy">
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Slider Controls -->
    <button class="slider-btn slider-prev" id="sliderPrev">
        <i class="fas fa-chevron-left"></i>
    </button>
    <button class="slider-btn slider-next" id="sliderNext">
        <i class="fas fa-chevron-right"></i>
    </button>

    <!-- Slider Dots -->
    <div class="slider-dots" id="sliderDots">
        {% for product in slider_products %}
        <span class="dot {% if loop.first %}active{% endif %}" data-index="{{ loop.index0 }}"></span>
        {% endfor %}
    </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     CATEGORY QUICK LINKS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section class="categories-section">
    <div class="section-container">
        <h2 class="section-title">Shop by Category</h2>
        <div class="categories-grid">
            {% set cat_icons = {
                'Men': 'üëî',
                'Women': 'üëó',
                'Kids': 'üßí',
                'Electronics': 'üíª',
                'Sports': '‚öΩ',
                'Home': 'üè†',
                'Beauty': 'üíÑ',
                'Footwear': 'üëü',
                'Accessories': 'üëú',
                'Books': 'üìö'
            } %}
            {% for cat in categories %}
            <a href="{{ url_for('products') }}?category={{ cat.category }}" class="category-card">
                <div class="cat-icon">{{ cat_icons.get(cat.category, 'üõçÔ∏è') }}</div>
                <span>{{ cat.category }}</span>
            </a>
            {% endfor %}
        </div>
    </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     FEATURED PRODUCTS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section class="products-section">
    <div class="section-container">
        <div class="section-header">
            <h2 class="section-title">Featured Products</h2>
            <a href="{{ url_for('products') }}" class="view-all">View All <i class="fas fa-arrow-right"></i></a>
        </div>
        <div class="products-grid">
            {% for product in featured_products %}
            <div class="product-card" data-id="{{ product.id }}">
                <!-- Badges -->
                <div class="card-badges">
                    {% if product.stock <= 2 and product.stock > 0 %}
                        <span class="badge badge-urgent">Only {{ product.stock }} left!</span>
                    {% endif %}
                    {% if product.original_price %}
                        <span class="badge badge-discount">
                            {{ ((1 - product.price/product.original_price)*100)|int }}% OFF
                        </span>
                    {% endif %}
                </div>

                <!-- Favorite Button -->
                <button class="fav-btn" onclick="toggleFavorite({{ product.id }}, this)">
                    <i class="fas fa-heart"></i>
                </button>

                <!-- Product Image -->
                <a href="{{ url_for('product_detail', product_id=product.id) }}">
                    <div class="card-image">
                        <img src="{{ product.image_url }}" alt="{{ product.name }}" loading="lazy">
                    </div>
                </a>

                <!-- Product Info -->
                <div class="card-info">
                    <span class="card-category">{{ product.category }}</span>
                    <h3 class="card-name">{{ product.name }}</h3>

                    <!-- Rating Stars -->
                    <div class="card-rating">
                        {% for i in range(5) %}
                            {% if i < product.rating|int %}
                                <i class="fas fa-star star-filled"></i>
                            {% else %}
                                <i class="far fa-star star-empty"></i>
                            {% endif %}
                        {% endfor %}
                        <span class="rating-num">({{ product.rating }})</span>
                    </div>

                    <!-- Price -->
                    <div class="card-price">
                        <span class="price-current">‚Çπ{{ "%.0f"|format(product.price) }}</span>
                        {% if product.original_price %}
                        <span class="price-original">‚Çπ{{ "%.0f"|format(product.original_price) }}</span>
                        {% endif %}
                    </div>

                    <!-- Action Buttons -->
                    <div class="card-actions">
                        <button class="btn-cart" onclick="addToCart({{ product.id }})">
                            <i class="fas fa-cart-plus"></i> Add to Cart
                        </button>
                        <form action="{{ url_for('buy_now', product_id=product.id) }}" method="POST" style="flex:1">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                            <button type="submit" class="btn-buy">
                                <i class="fas fa-bolt"></i> Buy Now
                            </button>
                        </form>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     AI RECOMMENDATION SECTION
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section class="recommendation-section">
    <div class="section-container">
        <div class="section-header">
            <div class="ai-badge">ü§ñ AI Powered</div>
            <h2 class="section-title">Users Also Bought</h2>
            <p class="section-sub">Personalized picks just for you</p>
        </div>
        <div class="products-grid">
            {% for product in recommended %}
            <div class="product-card" data-id="{{ product.id }}">
                <div class="card-badges">
                    {% if product.stock <= 2 and product.stock > 0 %}
                        <span class="badge badge-urgent">Only {{ product.stock }} left!</span>
                    {% endif %}
                </div>
                <button class="fav-btn" onclick="toggleFavorite({{ product.id }}, this)">
                    <i class="fas fa-heart"></i>
                </button>
                <a href="{{ url_for('product_detail', product_id=product.id) }}">
                    <div class="card-image">
                        <img src="{{ product.image_url }}" alt="{{ product.name }}" loading="lazy">
                    </div>
                </a>
                <div class="card-info">
                    <span class="card-category">{{ product.category }}</span>
                    <h3 class="card-name">{{ product.name }}</h3>
                    <div class="card-price">
                        <span class="price-current">‚Çπ{{ "%.0f"|format(product.price) }}</span>
                        {% if product.original_price %}
                        <span class="price-original">‚Çπ{{ "%.0f"|format(product.original_price) }}</span>
                        {% endif %}
                    </div>
                    <div class="card-actions">
                        <button class="btn-cart" onclick="addToCart({{ product.id }})">
                            <i class="fas fa-cart-plus"></i> Add to Cart
                        </button>
                        <form action="{{ url_for('buy_now', product_id=product.id) }}" method="POST" style="flex:1">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                            <button type="submit" class="btn-buy">
                                <i class="fas fa-bolt"></i> Buy
                            </button>
                        </form>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SECURITY TRUST BADGES
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<section class="trust-section">
    <div class="section-container">
        <div class="trust-grid">
            <div class="trust-item">
                <i class="fas fa-lock"></i>
                <h4>100% Secure</h4>
                <p>SSL encrypted checkout</p>
            </div>
            <div class="trust-item">
                <i class="fas fa-shield-alt"></i>
                <h4>Safe Payments</h4>
                <p>Razorpay secured gateway</p>
            </div>
            <div class="trust-item">
                <i class="fas fa-undo"></i>
                <h4>Easy Returns</h4>
                <p>7-day hassle free return</p>
            </div>
            <div class="trust-item">
                <i class="fas fa-truck"></i>
                <h4>Fast Delivery</h4>
                <p>Free shipping over ‚Çπ499</p>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/cart.js') }}"></script>
<script>
    // Hero Slider Logic
    let currentSlide = 0;
    const slides = document.querySelectorAll('.hero-slide');
    const dots   = document.querySelectorAll('.dot');

    function goToSlide(n) {
        slides[currentSlide].classList.remove('active');
        dots[currentSlide].classList.remove('active');
        currentSlide = (n + slides.length) % slides.length;
        slides[currentSlide].classList.add('active');
        dots[currentSlide].classList.add('active');
    }

    // Auto slide every 3 seconds
    let autoSlide = setInterval(() => goToSlide(currentSlide + 1), 3000);

    document.getElementById('sliderNext').addEventListener('click', () => {
        clearInterval(autoSlide);
        goToSlide(currentSlide + 1);
        autoSlide = setInterval(() => goToSlide(currentSlide + 1), 3000);
    });

    document.getElementById('sliderPrev').addEventListener('click', () => {
        clearInterval(autoSlide);
        goToSlide(currentSlide - 1);
        autoSlide = setInterval(() => goToSlide(currentSlide + 1), 3000);
    });

    dots.forEach((dot, i) => {
        dot.addEventListener('click', () => {
            clearInterval(autoSlide);
            goToSlide(i);
        });
    });
</script>
{% endblock %}